<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/layout :: layout(~{::content})}">
<body>
<div th:fragment="content">
    <div class="breadcrumb">
        <a href="/admin">대시보드</a> &gt;
        <a href="/admin/projects">프로젝트</a> &gt;
        <a th:href="@{/admin/projects/{id}(id=${project.id})}" th:text="${project.name}">Project Name</a> &gt;
        <span>이메일</span>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1>이메일 - <span th:text="${project.name}">Project Name</span></h1>
        <a th:href="@{/api/admin/projects/{id}/emails/export(id=${project.id})}" class="btn btn-success">CSV 내보내기</a>
    </div>

    <div class="card">
        <p style="margin-bottom: 20px;" th:text="${#lists.size(emails)} + '개 이메일 수집됨'">0개 이메일 수집됨</p>

        <div th:if="${#lists.isEmpty(emails)}" class="empty-state">
            <p>아직 수집된 이메일이 없습니다.</p>
        </div>

        <table th:if="${!#lists.isEmpty(emails)}">
            <thead>
                <tr>
                    <th>이메일</th>
                    <th>채널</th>
                    <th>게시물 번호</th>
                    <th>수집일시</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="email : ${emails}">
                    <td th:text="${email.email}">user@example.com</td>
                    <td th:text="${email.channel ?: '-'}">-</td>
                    <td th:text="${email.postNumber ?: '-'}">-</td>
                    <td th:text="${#temporals.format(email.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
